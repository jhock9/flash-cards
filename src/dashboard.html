<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="03OSzltztIYEfli3IBMepEStSED0F-GGmw8CGxUPdWY"/>
  <title>Interactive Flash Cards | Dashboard</title>
  <meta name="description" content="An interactive flashcard app by ABA Co-op. User Dashboard.">
  
  <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/dashboard.css">
  
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://kit.fontawesome.com/18723e8048.js" crossorigin="anonymous"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body id="dash-page" class="center">
  <div id="dash-content-wrapper" class="content-wrapper center">
    <aside id="dash-panel" class="center"> 
      <nav id="dash-nav" class="center">
        <figure class="center">
          <img src="assets/ABA+Red+Logo.png" alt="Logo of ABA Co-op, a cooperative organization for Applied Behavior Analysis">
        </figure>
        
        <ul id="dash-nav-list" class="center">            
          <li class="admin-view nav-tab hide center">
            <a id="users-tab" class="center" href="#users">Users</a>
          </li>
          
          <li class="nav-tab center">
            <a id="clients-tab" class="center" href="#clients">Clients</a>
          </li>
          
          <li class="nav-tab center">
            <a id="flashcards-tab" class="center" href="#flashcards">Flashcards App</a>
          </li>
          
          <li class="admin-view nav-tab hide center">
            <a id="admin-tab" class="center" href="#admin">Admin</a>
          </li>
          
          <li class="nav-tab center">
            <a id="account-tab" class="center" href="#account">My Account</a>
          </li>
        </ul>
      </nav>
      
      <div id="logout-container" class="center">
        <button id="logout-btn" class="wide-btn btn center">Log Out</button>
      </div>
    </aside>
    
    <div id="menu-btns"> 
      <button id="nav-open-btn" class="square-btn btn center"><i class="fa-solid fa-bars"></i></button>
    </div>
    
    <main id="section-wrapper" class="center">
      <!-- USERS SECTION -->
      <section id="users" class="hide center">
        <div id="users-header-wrapper" class="center">
          <table id="users-header">
            <!-- Todo: create table for mobile with only 2 columns: Name & Actions -->     
            <thead id="users-labels">
              <!-- Todo: Sortable table -->
              <tr>
                <th>Name</th>
                <th>Username</th>
                <th>Passcode</th> 
                <th>Role</th>
                <th>Actions</th>
              </tr>
            </thead>
            
            <form id="user-form">
              <tbody id="users-create">
                <tr>
                  <td><input type="text" id="new-user-name" placeholder="Enter name" required></td>
                  <td><input type="text" id="new-user-username" placeholder="Enter username" required></td>
                  <td><input type="text" id="new-user-password" placeholder="Enter passcode" pattern="\d{4}" title="Passcode must be a 4-digit code" required></td>
                  <td>
                    <select id="new-user-role" required>
                      <option value="">Select</option>
                      <option value="admin">Admin</option>
                      <option value="user">User</option>
                    </select>
                  </td>
                  <td>
                    <button type="submit" id="create-user-btn" class="table-icon"><i class="fa-regular fa-square-plus"></i></button>
                  </td>
                </tr>
              </tbody>
            </form>
          </table>
        </div>
        
        <!-- Table content dynamically generated from database -->
        <div id="users-table-wrapper" class="center">
          <table id="users-table">
            <tbody id="users-table-body">
            </tbody>
          </table>
        </div>
      </section>
      
      <!-- CLIENTS SECTION -->
      <section id="clients" class="hide center">
        <div id="clients-header-wrapper" class="center">
          <table id="clients-header">
            <!-- Todo: create table for mobile with only 2 columns: Therapist Name & Actions -->     
            <thead id="clients-labels">
              <!-- Todo: Sortable table -->
              <tr>
                <th>Client Name</th>
                <th>Therapist Username</th>
                <th>Client ID</th>
                <th>Actions</th>
              </tr>
            </thead>
            
            <form id="client-form">
              <tbody id="clients-create">
                <tr>
                  <td><input type="text" id="new-client-name" placeholder="Enter client name" required></td>
                  <td><input type="text" id="new-client-tech-name" placeholder="Enter name" required></td>
                  <td><input type="text" id="new-client-id" placeholder="*auto-generated*" disabled></td>
                  <td>
                    <button type="submit" id="create-client-btn" class="table-icon"><i class="fa-regular fa-square-plus"></i></button>
                  </td>
                </tr>
              </tbody>
            </form>
          </table>
        </div>
        
        <!-- Table content dynamically generated from database -->
        <div id="clients-table-wrapper" class="center">
          <table id="clients-table">
            <tbody id="clients-table-body">
            </tbody>
          </table>
        </div>
      </section>    
      
      <!-- FLASHCARDS SECTION - EXTERNAL PAGE -->
      <section id="flashcards" class="hide center">
      </section>
      
      <!-- ADMIN SECTION -->
      <section id="admin" class="center">
        <div id="admin-data-wrapper" class="center">
          
          <div class="data-wrapper center">
            <h2>Tag Counts</h2>
            <div id="tag-counts-wrapper" class="center">
              <!-- Tag Counts content dynamically generated from database -->
              <div id="tag-counts-table-wrapper" class="center">
                <table id="tag-counts-table" class="hide center">
                  <tbody id="tag-counts-table-body">
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          
          <div class="data-wrapper center">
            <h2>App Data</h2>
            <div id="app-data-wrapper" class="center">
              <!-- App Data content dynamically generated from database -->
              <div id="app-data-table-wrapper" class="center">
                <table id="app-data-table" class="hide center">
                  <tbody id="app-data-table-body">
                    <tr>
                      <td><strong>Total Photos:</strong></td>
                      <td id="totalPhotos"></td>
                    </tr>
                    <tr>
                      <td><strong>Admins:</strong></td>
                      <td id="adminCount"></td>
                    </tr>
                    <tr>
                      <td><strong>Users:</strong></td>
                      <td id="userCount"></td>
                    </tr>
                    <tr>
                      <td><strong>Clients:</strong></td>
                      <td id="clientCount"></td>
                    </tr>
                    <tr>
                      <td><strong>Total Sessions:</strong></td>
                      <td id="sessionCount"></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <button id="refresh-btn" class="wide-btn btn center">Refresh</button>
        </div>
        
        <div id="google-connect-wrapper" class="center">
          <div id="connected-wrapper" class="data-wrapper center"> 
            <h3>Photos Connection:</h3>
            <i id="connected-icon" class="hide fa-regular fa-circle-check"></i>
            <i id="disconnected-icon" class="fa-regular fa-circle-xmark"></i>
          </div>
          
          <div id="google-signin-wrapper" class="hide center">
            <div id="g_id_onload"
              data-client_id=""
              data-login_uri="" 
              data-context="use"
              data-ux_mode="popup"
              data-auto_prompt="false">
            </div>
            
            <div id="google-signin" class="g_id_signin"
              data-type="standard"
              data-shape="rectangular"
              data-theme="outline"
              data-text="signin_with"
              data-size="large"
              data-logo_alignment="left">
            </div>
          </div>
        </div>  
      </section>
      
      <!-- ACCOUNT SECTION -->
      <section id="account" class="hide center">  
        <table id="account-table" class="center">
          <tr>
            <th>Name:</th>
            <td><span id="acct-name">Super Admin</span></td>
          </tr>
          <tr>
            <th>Username:</th>
            <td><span id="acct-username">SuperAdmin</span></td>
          </tr>
        </table>
          
        <div class="form-wrapper center">
          <h4>Update 4-Digit Passcode?</h4>
          <form id="update-password-form" class="center">
            <div class="password-wrapper center">
              <input type="password" id="current-password" class="input-field" name="currentPassword" placeholder="Current Code" pattern="\d{4}" title="Password must be a 4-digit code" required>
              <i class="toggle-password fa-regular fa-eye-slash"></i>
              <i class="toggle-password hide fa-solid fa-eye"></i>
            </div>
            
            <div class="password-wrapper center">
              <input type="password" id="new-password" class="input-field" name="password" placeholder="New Code" pattern="\d{4}" title="Password must be a 4-digit code" required>
              <i class="toggle-password fa-regular fa-eye-slash"></i>
              <i class="toggle-password hide fa-solid fa-eye"></i>
            </div>
            
            <div class="password-wrapper center">
              <input type="password" id="confirm-new-password" class="input-field" name="confirmPassword" placeholder="Confirm Code" pattern="\d{4}" title="Password must be a 4-digit code" required>
              <i class="toggle-password fa-regular fa-eye-slash"></i>
              <i class="toggle-password hide fa-solid fa-eye"></i>
            </div>
            
            <button type="submit" id="update-password-btn" class="wide-btn btn center">Update</button>
          </form>
        </div>
      </section>
    </main>
  </div>
  
  <!-- Modals -->
  <div id="password-req-modal" class="modal hide center">
    <div class="modal-content center">
      <h2 class="center">Oops, your new passcode doesn't meet the requirements.</h2>
      <i class="fa-regular fa-face-frown"></i>
      <p class="center">Please try again with a 4-digit code!</p>
    </div>
  </div>
  
  <div id="password-mismatch-modal" class="modal hide center">
    <div class="modal-content center">
      <h2 class="center">Oops, your new passcode doesn't match.</h2>
      <i class="fa-regular fa-face-frown"></i>
      <p class="center">Please try again!</p>
    </div>
  </div>
  
  <div id="current-password-incorrect-modal" class="modal hide center">
    <div class="modal-content center">
      <h2 class="center">Oops, your current passcode is incorrect.</h2>
      <i class="fa-regular fa-face-frown"></i>
      <p class="center">Please try again!</p>
    </div>
  </div>
  
  <div id="password-updated-modal" class="modal hide center">
    <div class="modal-content center">
      <h2 class="center">Your passcode has been updated!</h2>
      <i class="fa-regular fa-face-grin-beam"></i>
      <p class="center">Please use your new passcode to log in.</p>
    </div>
  </div>
  
  <div id="unavailable-modal" class="modal hide center">
    <div class="modal-content center">
      <h2 class="center">Sorry, that username is already taken.</h2>
      <i class="fa-regular fa-face-grimace"></i>
      <p class="center">Please try again!</p>
    </div>
  </div>
  
  <div id="user-created-modal" class="modal hide center">
    <div class="modal-content center">
      <h2 class="center">New user created.</h2>
      <i class="fa-regular fa-thumbs-up"></i>
      <p class="center">Cheers!</p>
    </div>
  </div>
  
  <div id="client-created-modal" class="modal hide center">
    <div class="modal-content center">
      <h2 class="center">New client account created.</h2>
      <i class="fa-regular fa-thumbs-up"></i>
      <p class="center">Cheers!</p>
    </div>
  </div>
  
  <div id="no-username-modal" class="modal hide center">
    <div class="modal-content center">
      <h2 class="center">Sorry, that username doesn't exist or is incorrect.</h2>
      <i class="fa-regular fa-face-grimace"></i>
      <p class="center">Please try again!</p>
    </div>
  </div>
  
  <div id="google-signin-modal" class="modal hide center">
    <div class="modal-content center">
      <h2 class="center">Looks like we got disconnected from Google.</h2>
      <i class="fa-regular fa-face-grin-beam-sweat"></i>
      <p class="center">Please sign back into the ABA Co-op Google account so the photo library can stay updated!</p>
      <h3 class="center">Thanks!</h3>
    </div>
  </div>
  
  <div id="flashcards-modal" class="modal hide center">
    <div class="modal-content center">
      <h2 class="center">Whoops...the photo library missed an update!</h2>
      <i class="fa-regular fa-face-grin-beam-sweat"></i>
      <p class="center">Its ok though, you can still access the flashcards page.
      Make sure to let an Admin know to reconnect to the photo library soon.</p>
      <h3 class="center">Thanks!</h3>
    </div>
  </div>
  
  <script type="module" src="js/dashboard/dashboard.js"></script>
</body> 
</html>
